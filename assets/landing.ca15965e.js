import"./modulepreload-polyfill.b7f2da20.js";import{v as c}from"./vendor.fcf43544.js";async function d(){return await c("taptown",1,{upgrade(e,a,t,p){a===0&&e.createObjectStore("saves")}})}async function s(e){return await e.transaction("saves","readonly").objectStore("saves").getAllKeys()}const o=document.querySelector(".save-list"),i=document.querySelector(".add-save"),l=document.getElementById("new-save-name"),v=new URLSearchParams(location.search).get("pwa");v==="true"&&(document.querySelector(".card-install").hidden=!0);let n;m();async function m(){n=await d(),i.addEventListener("click",async()=>{const e=l.value,a={lastSaved:Date.now(),timePlayed:0,map:new Uint8Array(Array(4096).fill(0)),people:[],nextPersonId:0,money:100};await n.transaction("saves","readwrite").objectStore("saves").put(a,e),console.log(e,"save added"),r(await s(n))}),r(await s(n))}function r(e){o.innerHTML="",e.forEach(a=>{const t=document.createElement("a");t.className="card card-saves",t.href=`./app/?save=${encodeURIComponent(a)}`,t.innerHTML=`<div class="card-inner"><h2>${a}</h2><p>Tap to Play!</p></div>`,o.appendChild(t)})}
