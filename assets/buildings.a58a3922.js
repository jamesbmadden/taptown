var V=Object.defineProperty;var W=(m,c,g)=>c in m?V(m,c,{enumerable:!0,configurable:!0,writable:!0,value:g}):m[c]=g;var b=(m,c,g)=>(W(m,typeof c!="symbol"?c+"":c,g),g);(function(){"use strict";const m=Symbol("Comlink.proxy"),c=Symbol("Comlink.endpoint"),g=Symbol("Comlink.releaseProxy"),w=Symbol("Comlink.thrown"),_=e=>typeof e=="object"&&e!==null||typeof e=="function",T={canHandle:e=>_(e)&&e[m],serialize(e){const{port1:s,port2:u}=new MessageChannel;return S(e,s),[u,[u]]},deserialize(e){return e.start(),N(e)}},C={canHandle:e=>_(e)&&w in e,serialize({value:e}){let s;return e instanceof Error?s={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:s={isError:!1,value:e},[s,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},A=new Map([["proxy",T],["throw",C]]);function S(e,s=self){s.addEventListener("message",function u(r){if(!r||!r.data)return;const{id:n,type:d,path:a}=Object.assign({path:[]},r.data),f=(r.data.argumentList||[]).map(h);let t;try{const l=a.slice(0,-1).reduce((i,p)=>i[p],e),o=a.reduce((i,p)=>i[p],e);switch(d){case"GET":t=o;break;case"SET":l[a.slice(-1)[0]]=h(r.data.value),t=!0;break;case"APPLY":t=o.apply(l,f);break;case"CONSTRUCT":{const i=new o(...f);t=I(i)}break;case"ENDPOINT":{const{port1:i,port2:p}=new MessageChannel;S(e,p),t=D(i,[i])}break;case"RELEASE":t=void 0;break;default:return}}catch(l){t={value:l,[w]:0}}Promise.resolve(t).catch(l=>({value:l,[w]:0})).then(l=>{const[o,i]=P(l);s.postMessage(Object.assign(Object.assign({},o),{id:n}),i),d==="RELEASE"&&(s.removeEventListener("message",u),R(s))})}),s.start&&s.start()}function O(e){return e.constructor.name==="MessagePort"}function R(e){O(e)&&e.close()}function N(e,s){return k(e,[],s)}function E(e){if(e)throw new Error("Proxy has been released and is not useable")}function k(e,s=[],u=function(){}){let r=!1;const n=new Proxy(u,{get(d,a){if(E(r),a===g)return()=>y(e,{type:"RELEASE",path:s.map(f=>f.toString())}).then(()=>{R(e),r=!0});if(a==="then"){if(s.length===0)return{then:()=>n};const f=y(e,{type:"GET",path:s.map(t=>t.toString())}).then(h);return f.then.bind(f)}return k(e,[...s,a])},set(d,a,f){E(r);const[t,l]=P(f);return y(e,{type:"SET",path:[...s,a].map(o=>o.toString()),value:t},l).then(h)},apply(d,a,f){E(r);const t=s[s.length-1];if(t===c)return y(e,{type:"ENDPOINT"}).then(h);if(t==="bind")return k(e,s.slice(0,-1));const[l,o]=x(f);return y(e,{type:"APPLY",path:s.map(i=>i.toString()),argumentList:l},o).then(h)},construct(d,a){E(r);const[f,t]=x(a);return y(e,{type:"CONSTRUCT",path:s.map(l=>l.toString()),argumentList:f},t).then(h)}});return n}function H(e){return Array.prototype.concat.apply([],e)}function x(e){const s=e.map(P);return[s.map(u=>u[0]),H(s.map(u=>u[1]))]}const M=new WeakMap;function D(e,s){return M.set(e,s),e}function I(e){return Object.assign(e,{[m]:!0})}function P(e){for(const[s,u]of A)if(u.canHandle(e)){const[r,n]=u.serialize(e);return[{type:"HANDLER",name:s,value:r},n]}return[{type:"RAW",value:e},M.get(e)||[]]}function h(e){switch(e.type){case"HANDLER":return A.get(e.name).deserialize(e.value);case"RAW":return e.value}}function y(e,s,u){return new Promise(r=>{const n=j();e.addEventListener("message",function d(a){!a.data||!a.data.id||a.data.id!==n||(e.removeEventListener("message",d),r(a.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:n},s),u)})}function j(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const L=20;class U{constructor(s){b(this,"_roads",[[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]]);b(this,"map",new Uint8Array);b(this,"_cb");this.map=s}drawRoads(){var s,u;for(let r=0;r<L;r++)for(let n=0;n<L;n++)if(this._roads[r][n]){let a=0,f=!!((s=this._roads[r-1])==null?void 0:s[n]),t=!!((u=this._roads[r+1])==null?void 0:u[n]),l=!!this._roads[r][n-1],o=!!this._roads[r][n+1];f&&t&&l&&o?a=7:f&&t&&l?a=14:f&&t&&o?a=13:t&&o&&l?a=12:f&&l&&o?a=15:l&&o?a=1:f&&t?a=4:l&&f?a=8:l&&t?a=9:t&&o?a=10:o&&f?a=11:f?a=5:t?a=6:o?a=2:l?a=3:a=16;let i=r*L+n;this.map[i]=a}}static log(){console.log("buildings worker running")}setCallback(s){this._cb=s,this._cb(this.map)}}S(U)})();
