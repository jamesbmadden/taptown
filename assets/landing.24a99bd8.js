import"./modulepreload-polyfill.b7f2da20.js";import{v as o}from"./vendor.fcf43544.js";async function c(){return await o("taptown",1,{upgrade(e,a,t,m){a===0&&e.createObjectStore("saves")}})}async function r(e){return await e.transaction("saves","readonly").objectStore("saves").getAllKeys()}const s=document.querySelector(".save-list"),d=document.querySelector(".add-save"),i=document.getElementById("new-save-name"),l=new URLSearchParams(location.search).get("pwa");l==="true"&&(document.querySelector(".card-install").hidden=!0);let n;v();async function v(){n=await c(),d.addEventListener("click",async()=>{const e=i.value,a={lastSaved:Date.now(),timePlayed:0,map:new Uint8Array(Array(4096).fill(0)),people:[],nextPersonId:0,money:100};await n.transaction("saves","readwrite").objectStore("saves").put(a,e),console.log(e,"save added"),location.href=`./app/?save=${encodeURIComponent(e)}`}),p(await r(n))}function p(e){s.innerHTML="",e.forEach(a=>{const t=document.createElement("a");t.className="card card-saves",t.href=`./app/?save=${encodeURIComponent(a)}`,t.innerHTML=`<div class="card-inner"><h2>${a}</h2><p>Tap to Play!</p></div>`,s.appendChild(t)})}
