import"./modulepreload-polyfill.b7f2da20.js";import{l as r}from"./vendor.9ce12084.js";async function i(){return await r("taptown",1,{upgrade(e,t,a,n){t===0&&e.createObjectStore("saves")}})}async function s(e){return await e.transaction("saves","readonly").objectStore("saves").getAllKeys()}const o=document.querySelector(".game-saves"),d=document.querySelector(".add-save"),l=document.getElementById("new-save-name"),u=new URLSearchParams(location.search).get("pwa");u==="true"&&(document.querySelector(".pwa-button").hidden=!0);v();async function v(){const e=await i();c(await s(e)),d.addEventListener("click",async()=>{const t=l.value,a={lastSaved:Date.now(),map:new Uint8Array(Array(4096).fill(0))};await e.transaction("saves","readwrite").objectStore("saves").put(a,t),console.log(t,"save added"),c(await s(e))})}function c(e){o.innerHTML="",e.forEach(t=>{const a=document.createElement("span");a.textContent=t;const n=document.createElement("li");n.innerHTML=`${a.outerHTML} - <a href="./app/?save=${encodeURIComponent(t)}">Play</a>`,o.appendChild(n)})}
